{% import 'admin/template_responsive_table_users.html' as users_templates with context %}
{% extends "main.html" %}
{% block title %}Users management{% endblock %}
{% block content %}
<h1>Users</h1>
<div class="row">
  <div class="col-md-4">
    <ul class="list-group">
      <li class="list-group-item">Number of users: {{ total_nb_users }}</li>
      <li class="list-group-item">Two-Factor Authentication: {% if config["ENFORCE_2FA"] %}Enforced{% else %}Not enforced{% endif %}</li>
    </ul>
  </div>
  <div class="col-md-4">
    <ul class="list-group">
      <li class="list-group-item">Not active: <a href="{{ url_for('admin_bp.list_users', is_active=0) }}">{{ nb_users_not_active }}</a></li>
      <li class="list-group-item">Not confirmed (via email): <a href="{{ url_for('admin_bp.list_users', is_confirmed=0) }}">{{ nb_users_not_confirmed }}</a></li>
      <li class="list-group-item">Not using Two-Factor Authentication: <a href="{{ url_for('admin_bp.list_users', is_2fa_active=0) }}">{{ nb_users_without_2fa }}</a></li>
    </ul>
  </div>
  <div class="col-md-3 ms-auto">
    <form class="align-items-center" method="GET">
        <label class="visually-hidden" for="userInput">Search term</label>
        <div class="input-group">
          <input type="text" class="form-control" id="userInput" name="query" placeholder="Search term" />
          <button type="submit" class="btn btn-primary input-group-text">Submit</button>
        </div>
    </form>
  </div>
</div>
<br />
<div class="row">
  <div class="col">
    {{ users_templates.table_users(users=users) }}
  </div>
</div>
<div class="row">
    <div class="col">
        {{ pagination.links }}
    </div>
</div>
<div class="row">
    <div class="col">
        {{ pagination.info }}
    </div>
</div>
<br />
<p>Removing a user will not impact any of the contributions they have previously made.</p>
<a class="btn btn-primary" href="{{ url_for('admin_bp.form_user') }}">Create a new user</a>
<br /><br />
{% endblock %}
